@using ShipShop.Web.Models
@using ShipShop.Web.Infrastructure.Core
@model PaginationSet<PostViewModel>
@{
    Layout = "~/Views/Shared/_Layout.cshtml";
}


<div class="col-md-12">
    <div class="container">

        @foreach (var item in Model.Items)
        {
            var href = "/bai-viet/" + item.Alias + ".html";
            <div class="col-md-12 tin-tuc">
                <div class="container">
                    <a href="@href">
                        <img src="@item.Image" />
                    </a>
                    <div class="mo-ta">
                        <a href="@href" class="ten">@item.Name</a>
                        <p class="chi-tiet-mo-ta">@item.Description</p>
                    </div>

                </div>
            </div>
        }
        @if (Model.TotalPages > 1)
        {
            // Create numeric links
            var startPageIndex = Math.Max(1, Model.Page - Model.MaxPage / 2);
            var endPageIndex = Math.Min(Model.TotalPages, Model.Page + Model.MaxPage / 2);
            <div class="col-md-8">
                <nav>
                    <ul class="pagination" style="margin:0px;">
                        @if (Model.Page > 1)
                        {
                            <li>
                                <a href="?page=1" aria-label="First">
                                    <i class="fa fa-angle-double-left"></i>
                                </a>
                            </li>
                            <li>
                                <a href="?page=@(Model.Page-1)" aria-label="Previous">
                                    <i class="fa fa-angle-double-left"></i>
                                </a>
                            </li>
                        }
                        @for (int i = startPageIndex; i <= endPageIndex; i++)
                        {
                            if (Model.Page == i)
                            {
                                <li class="active">
                                    <a href="javascript:" title="Trang @i">
                                        @i
                                    </a>
                                </li>
                            }
                            else
                            {
                                <li>
                                    <a href="?page=@i" title="Trang @i">
                                        @i
                                    </a>
                                </li>
                            }
                        }
                        @if (Model.Page < Model.TotalPages)
                        {
                            <li>
                                <a href="?page=@(Model.Page+1)" aria-label="Next">
                                    <i class="fa fa-angle-double-right"></i>
                                </a>
                            </li>
                            <li>
                                <a href="?page=@(Model.TotalPages)" aria-label="Last">
                                    <i class="fa fa-angle-double-right"></i>
                                </a>
                            </li>
                        }
                    </ul>
                </nav>
            </div>
        }
    </div>
   

</div>


<script>
    console.log(window.location.pathname);
    var path = window.location.pathname;
    $a = $('#bs-example-navbar-collapse-1 a[href="' + path + '"]');
    if ($a.length != 0) {
        $('#bs-example-navbar-collapse-1 li').each(function () {
            $(this).removeClass("active");
            $(this).find('a').addClass('link link--yaku active');
        });
        $('a[href="' + path + '"]').closest('li').addClass("active");
        $('a[href="' + path + '"]').removeClass('link link--yaku active');
    }
</script>

